# Dev environment values
# Minimal resources, local datastores, no AI

namespace: "dev"

replicaCount: 1

# Use in-cluster RabbitMQ and MongoDB
useRabbitMQ: true
useMongoDB: true

# Disable Azure AD (using local auth)
useAzureAd: false

# Disable AI service (no OpenAI in dev)
aiService:
  create: false

# Virtual services for testing
virtualCustomer:
  create: true
  ordersPerHour: 50

virtualWorker:
  create: true
  ordersPerHour: 1500

# =============================================================================
# Service Access Strategy
# =============================================================================
# store-front: Accessed via NGINX Ingress on root path (/)
# store-admin: Direct LoadBalancer (can't use sub-path due to BASE_URL hardcoding)

# Ingress configuration - ONLY for store-front
ingress:
  enabled: true
  className: nginx
  annotations: {}
  rules:
    - paths:
        - path: /
          pathType: Prefix
          serviceName: store-front
          servicePort: 80

# =============================================================================
# Workload Identity Configuration
# =============================================================================
workloadIdentity:
  enabled: true
  clientId: "282d9fcd-89be-482a-b9e4-ddb04205b018"

# Key Vault for secrets
keyVault:
  uri: "https://kv-devcattle65.vault.azure.net/"

# =============================================================================
# Image Overrides - Using our ACR
# =============================================================================
orderService:
  image:
    repository: "acrdevcattle65.azurecr.io/order-service"
    tag: "latest"

productService:
  image:
    repository: "acrdevcattle65.azurecr.io/product-service"
    tag: "latest"

storeFront:
  serviceType: ClusterIP  # Accessed via Ingress
  image:
    repository: "acrdevcattle65.azurecr.io/store-front"
    tag: "latest"

storeAdmin:
  serviceType: LoadBalancer  # Direct access (can't use ingress sub-path)
  image:
    repository: "acrdevcattle65.azurecr.io/store-admin"
    tag: "latest"
